import{G as K,j as e,W as p,l as A,r as z,w as Q,i as R,m as I,n as W,o as O,p as P,e as V,q as v,t as Y,v as $,x as G,y as H,s as k}from"./index-678ff260.js";import{a as l,t as u,o as N,b as X}from"./SkeletonCard-73b05201.js";import{L as q}from"./ListMovieHorizontal-f8d9da05.js";import _ from"./Error404Page-fd7c695a.js";import{E as J}from"./Error500Page-5b0a4ad7.js";import{u as g}from"./useQuery-207f1c6d.js";import{u as U}from"./useMutation-697463f8.js";import"./Card-0eb20596.js";function Z(a){return K({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M271.653 1023.192c-8.685 0-17.573-3.432-24.238-10.097-13.33-13.33-13.33-35.144 0-48.474L703.67 508.163 254.08 58.573c-13.33-13.331-13.33-35.145 0-48.475 13.33-13.33 35.143-13.33 48.473 0L776.38 483.925c13.33 13.33 13.33 35.143 0 48.473l-480.492 480.694c-6.665 6.665-15.551 10.099-24.236 10.099z"}}]})(a)}const T=a=>e.jsx("div",{className:"detail",children:e.jsxs(p,{className:"relative z-[1] flex flex-col md:flex-row gap-8 md:gap-16 py-5",children:[e.jsx("div",{className:"flex justify-center md:justify-start",children:e.jsx(l,{baseColor:"#202020",highlightColor:"#444",className:"detail-card rounded-2xl w-60 h-[360px]"})}),e.jsxs("div",{className:"detail-content text-white md:flex-1",children:[e.jsx(l,{baseColor:"#202020",highlightColor:"#444",count:2,className:"name"}),e.jsxs("div",{className:"flex items-center gap-6 flex-wrap mt-4",children:[e.jsx(l,{baseColor:"#202020",highlightColor:"#444",className:"name w-10 h-3"}),e.jsx(l,{baseColor:"#202020",highlightColor:"#444",className:"name w-10 h-3"}),e.jsx(l,{baseColor:"#202020",highlightColor:"#444",className:"name w-10 h-3"})]}),e.jsxs("div",{className:"flex items-center mt-5 gap-x-8 gap-y-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l,{baseColor:"#202020",highlightColor:"#444",className:"w-10 h-10",circle:!0}),e.jsx(l,{baseColor:"#202020",highlightColor:"#444"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l,{baseColor:"#202020",highlightColor:"#444",className:"w-10 h-10",circle:!0}),e.jsx(l,{baseColor:"#202020",highlightColor:"#444"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l,{baseColor:"#202020",highlightColor:"#444",className:"w-10 h-10",circle:!0}),e.jsx(l,{baseColor:"#202020",highlightColor:"#444"})]})]}),e.jsx(l,{baseColor:"#202020",highlightColor:"#444",className:"name mt-6 h-20"})]})]})}),ee=a=>(A(),z.useEffect(()=>{window.FB&&window.FB.XFBML&&window.FB.XFBML.parse()},[]),e.jsx("div",{className:"fb-comments fb-comment-embed","data-href":window.location.href,"data-numposts":3,"data-mobile":!0,"data-order-by":"reverse_time","data-colorscheme":"dark","data-lazy":!0,"ng-attr-data-href":window.location.href||""})),ae=({mediaType:a,auth:d})=>{var y,C,F;const m=R(),{id:r}=I(),E=A(),j=W(),w=O(),i=P();if(!r||!Number(r))return e.jsx(_,{});const{data:t,status:te,error:f,isFetching:B,isFetched:D}=g({queryKey:["detail",a,r],queryFn:()=>u.getDetail(a,+r),enabled:r!==void 0}),b=g({queryKey:["cast",a,r],queryFn:()=>u.getCast(a,+r),enabled:r!==void 0}),c=g({queryKey:["recommends",a,r],queryFn:()=>u.getRecommendations(a,+r),enabled:r!==void 0}),L=(s,o)=>{u.getVideo(a,o).then(n=>{m==null||m.open(`${n.data.results[0].site==="YouTube"?k.YouTube:k.Vimeo}${n.data.results[0].key||""}`)}).catch(n=>{m==null||m.open("https://www.youtube.com")})};if(!t&&D||f)return V.isAxiosError(f)&&((y=f.response)==null?void 0:y.status)===404?e.jsx(_,{}):e.jsx(J,{});const x=g({queryKey:["detail",{id:r,mediaType:a},"check-favorite"],queryFn:()=>v.checkAddedToFavorite({id:r+"",type:a}),enabled:d!==null&&(d==null?void 0:d.isLogged)}),S=U({mutationFn:({id:s,type:o})=>{var n;return i==null||i.showLoader(),(n=x.data)!=null&&n.data.added?v.removeFavorite({id:s,type:o}):v.addFavorite({id:s,type:o})},onSuccess(s,o,n){if(!x.data)return;const h={...x.data};return h.data.added?h.data.added=!1:h.data.added=!0,w.setQueryData(["detail",{id:r,mediaType:a},"check-favorite"],h),w.invalidateQueries({queryKey:["favorites"]}),i==null||i.hiddenLoader(),s},onError(s,o,n){return console.log(s),i==null||i.hiddenLoader(),s}});z.useEffect(()=>{window.scrollTo(0,0)},[E]);const M=()=>{if(!(d!=null&&d.isLogged)){j==null||j.requestOpenForm();return}S.mutate({id:r,type:a})};return e.jsxs("div",{className:"detail-page",children:[t&&e.jsx("div",{className:"detail",style:{backgroundImage:`url(${N(t.data.backdrop_path)})`},children:e.jsxs(p,{className:"relative z-[1] flex flex-col md:flex-row gap-8 md:gap-16 py-5",children:[e.jsx("div",{className:"detail-card overflow-hidden self-center rounded-2xl w-60",children:e.jsx(X.LazyLoadImage,{src:N(t.data.poster_path),loading:"lazy",alt:t.data.title||t.data.name||""})}),e.jsxs("div",{className:"detail-content text-white md:flex-1",children:[e.jsx("div",{className:"name text-white text-4xl tracking-widest font-extrabold",children:t.data.title||t.data.name||""}),e.jsxs("div",{className:"info flex items-center gap-2 md:gap-4 text-sm mt-4",children:[e.jsx("span",{className:"tracking-widest",children:new Date(t.data.release_date||t.data.first_air_date).getFullYear()||"N/A"}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"text-xl"}),t.data.runtime||t.data.episode_run_time[0]||"N/A"]}),e.jsxs("span",{className:"flex items-center text-sm",children:[e.jsx($,{className:"text-xl mr-1"})," ",t.data.vote_average.toFixed(2),e.jsx("span",{className:"text-xs font-sans italic opacity-70",children:"/10"})]}),e.jsxs("button",{onClick:()=>L(a,t.data.id),className:"flex items-center gap-4 uppercase tracking-[4px] group",children:["Trailer ",e.jsx(Z,{className:"text-xl group-hover:translate-x-1 transition-transform duration-300"})]})]}),e.jsx("div",{className:"flex items-center gap-6 flex-wrap mt-6",children:t.data.genres.map((s,o)=>e.jsx("span",{className:"genre-items text-sm border border-white rounded-3xl py-1 px-2",children:s.name},s.id.toString()))}),e.jsx("div",{className:"flex items-center mt-5 gap-x-8 gap-y-4 flex-wrap",children:b.data&&((C=b.data)==null?void 0:C.data.cast.slice(0,4).map((s,o)=>{if(s.profile_path)return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{className:"w-10 h-10 rounded-full object-cover",src:N(s.profile_path),alt:s.name}),e.jsx("span",{className:"text-sm opacity-70 text-white",children:s.name})]},s.id.toString())}))}),e.jsx("div",{className:"mt-6 text-white text-xs lg:w-[80%]",children:t.data.overview}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{className:`flex items-center gap-1 rounded-3xl bg-white/10\r
                                px-4 py-2 transition-all duration-200 ease-in-out hover:bg-white/20`,onClick:M,children:[(F=x.data)!=null&&F.data.added?e.jsx(G,{size:26}):e.jsx(H,{size:26}),e.jsx("span",{className:"text-sm",children:"Add to favorites"})]})})]})]})}),B&&e.jsx(T,{}),e.jsx("div",{className:"bg-black-2 py-5",children:e.jsxs(p,{children:[c.data&&c.data.data.results.length>0&&e.jsx("h2",{className:"text-light-gray text-2xl relative",children:"Recommends"}),c.data&&c.data.data.results.length>0&&e.jsx("div",{className:"list-movie-horizontal",children:e.jsx(q,{className:"pb-8 pt-6",data:c.data.data.results||c.data.data.results||[],mediaType:a})}),c.isFetching&&e.jsx(q,{skeleton:!0,data:[],mediaType:"all"})]})}),e.jsx("div",{className:"bg-black-2 py-5 ",children:e.jsxs(p,{children:[e.jsx("h2",{className:"text-light-gray text-2xl relative",children:"Comments"}),e.jsx(ee,{},new Date().getTime())]})})]})},se=Q(ae),xe=a=>e.jsxs(e.Fragment,{children:[" ",e.jsx(se,{...a})," "]});export{xe as default};
